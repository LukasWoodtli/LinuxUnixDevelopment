<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-003.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:45:53 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – 14.4 Fenster mit X</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap14-002.html">
<link rel="next" href="Kap14-004.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-002.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-004.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap14-000.html#RxxKap14000040004981F014100">14 Xlib – X Window-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-000.html#RxxKap14000040004981F014105">14.1 Architektur von X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F01410F">14.1.1 Pufferung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F014114">14.1.2 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-001.html#RxxKap14001040004B51F018100">14.2 X Toolkit</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-002.html#RxxKap14002040004B61F03B100">14.3 Der Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap14003040004B71F042100">14.4 Fenster mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F04210E">14.4.1 Verbindung herstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F042117">14.4.2 Fenster definieren</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F042177">14.4.3 Informationen f&uuml;r den Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F04217B">14.4.4 Fenster anzeigen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F042180">14.4.5 Fenster und X-Verbindung beenden</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14003040004B71F042183">14.4.6 Das Grundger&uuml;st als Quellcode</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-004.html#RxxKap14004040004B81F029100">14.5 Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029104">14.5.1 Event-Maske setzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029180">14.5.2 Event-Bearbeitungsschleife</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029187">14.5.3 Abarbeitung der Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F02918A">14.5.4 Tastatur-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F029190">14.5.5 Mausbutton-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A2">14.5.6 Expose-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A6">14.5.7 EnterWindowMask – LeaveWindowMask</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-004.html#RxxKap14004040004B81F0291A8">14.5.8 Listing zu den Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-005.html#RxxKap14005040004B91F038100">14.6 Grafik mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-005.html#RxxKap14005040004B91F038105">14.6.1 Grafikprimitive – Zeichenfunktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-006.html#RxxKap14006040004BA1F040100">14.7 Text mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040102">14.7.1 Fonts benutzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F04010E">14.7.2 &Uuml;bersicht zu den Fonts</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040181">14.7.3 H&ouml;he und Breite ermitteln</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040187">14.7.4 Listing mit Textausgabe</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-007.html#RxxKap14007040004BB1F032100">14.8 Farben mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-008.html#RxxKap14008040004BC1F019100">14.9 Beispiel – ein Button mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-009.html#RxxKap14009040004BD1F036100">14.10 Wozu kann ich denn nun die Xlib in der Praxis verwenden?</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-010.html#RxxKap14010040004BE1F03A100">14.11 X und X-Toolkits – Einf&uuml;hrung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-011.html#RxxKap14011040004BF1F01F100">14.12 Toolkit-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-011.html#RxxKap14011040004BF1F01F103">14.12.1 Widgets</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-012.html#RxxKap14012040004C01F020100">14.13 Ein einfaches Fenster mit einem Button</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-012.html#RxxKap14012040004C01F02010E">14.13.1 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-013.html#RxxKap14013040004C11F018100">14.14 Zwei Buttons in Box- und Form-Widget mit Textausgabe (Label-Widget)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-014.html#RxxKap14014040004C21F037100">14.15 editres – Widget-Hierarchie</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-015.html#RxxKap14015040004C31F020100">14.16 Texteingabe mit Dialog-Widget</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-016.html#RxxKap14016040004C41F01E100">14.17 X-Toolkits meets Xlib</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-017.html#RxxKap14017040004C51F045100">14.18 Zusammenfassung</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">14.4 <a id="RxxKap1440FenstermitX" name="RxxKap1440FenstermitX"></a>Fenster mit<a id="RxxKap14003040004B71F042100" name="RxxKap14003040004B71F042100"></a> X 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<p><a id="Xxx999236" name="Xxx999236"></a>Bevor hier mit einer Einf&uuml;hrung begonnen werden kann, soll erst einmal ein Listing erstellt werden, das Sie im Laufe der einzelnen Kapitel erweitern. Das Beispiel stellt au&szlig;erdem ein Grundger&uuml;st dar, das man im Allgemeinen f&uuml;r Projekte mit der Xlib verwenden kann. Zwar geht es in diesem Abschnitt erst um das Erstellen eines neuen Fensters – aber es werden dennoch bereits die Ereignisschleife und eine Funktion zur Auswertung der Ereignisse integriert – was aber erst im n&auml;chsten Abschnitt beschrieben wird.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>Bitte haben Sie Verst&auml;ndnis, dass ich bei den Listings nicht jede einzelne Funktion behandeln kann. Ebenso sieht es mit der exakten Syntaxbeschreibung der Funktionen aus. Anstatt Ihnen hier seitenweise Syntaxbeschreibungen zu servieren, habe ich mich in diesem Kapitel mehr f&uuml;r die Praxis entschieden. Ben&ouml;tigen Sie bei Bedarf eine genauere Beschreibung der einzelnen Funktionen mit deren Parametern, dann sollten Sie entweder die entsprechende Manual Page oder die Dokumentation der Xlib verwenden.</p>
</td>
</tr>
</table><br>
<p>Ein Fenster zu erstellen, ist im Prinzip recht einfach (wenn man es wei&szlig;), und l&auml;sst sich mit folgenden Schritten realisieren:</p>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>1.</b></td>
<td valign="top" width="100%" align="left"> Eine Verbindung zum X-Server herstellen</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>2.</b></td>
<td valign="top" width="100%" align="left"> die Umgebung &uuml;berpr&uuml;fen</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>3.</b></td>
<td valign="top" width="100%" align="left"> das Fenster erzeugen</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>4.</b></td>
<td valign="top" width="100%" align="left"> das Fenster anzeigen</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="top" width="10"><b>5.</b></td>
<td valign="top" width="100%" align="left"> das Fenster schlie&szlig;en und wieder freigeben</td>
</tr>
<tr>
<td valign="baseline" width="16">
                 
            </td>
<td valign="top" width="100%" align="left">
                 
            </td>
</tr>
</table>
<p>Um &uuml;berhaupt Programme mit der Xlib zu erstellen, m&uuml;ssen mindestens folgende Include-Dateien definiert werden:</p>
<pre>#include &lt;X11/Xlib.h&gt;<a id="Xxx999249" name="Xxx999249"></a>
#include &lt;X11/Xutil.h&gt;<a id="Xxx999251" name="Xxx999251"></a></pre>
<p>Um den Linker anschlie&szlig;end noch mit der Bibliothek bekannt zu machen, m&uuml;ssen Sie ihm den Pfad zur Xlib zeigen. Dies erledigen Sie mit den folgenden Flags (der Programmname sei <span class="listing">hallo_x.c</span>):</p>
<pre>$ gcc -o hallo_x hallo_x.c -L/usr/X11R6/lib -lX11
$ ./hallo_x</pre>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">14.4.1 Verbindung herstellen<a id="RxxKap14003040004B71F04210E" name="RxxKap14003040004B71F04210E"></a> 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999255" name="Xxx999255"></a>Der allererste Befehl – nachdem Sie alle Variablen und Datenstrukturen definiert haben – bei einer X-Anwendung lautet immer <span class="listing">XOpenDisplay()<a id="Xxx999257" name="Xxx999257"></a></span>, womit Sie eine Verbindung zum X-Server (Display) herstellen. Angewendet wird die Funktion so:</p>
<pre>   Display *display;
   Screen *screen;
   ...
   /* X-Sitzung &ouml;ffnen */
   display = XOpenDisplay (NULL);
   /* Fehler&uuml;berpr&uuml;fung */
   if (display == NULL) {
      printf("Verbindung zum X-Server fehlgeschlagen?!?\n");
      return EXIT_FAILURE;
   }
   /* Standardbildschirm eines Displays */
   screen = XDefaultScreen (display);</pre>
<p>Die Funktion liefert bei erfolgreicher Verbindung einen Zeiger auf die Anfangsadresse der <span class="listing">Display</span>-Struktur zur&uuml;ck. Konnte die Verbindung nicht eingerichtet werden, wird <span class="listing">NULL</span> zur&uuml;ckgegeben. Als Parameter wird dieser Funktion der Name eines Servers &uuml;bergeben, womit der Rechner eine Verbindung herstellen soll. Wird hierf&uuml;r <span class="listing">NULL</span> oder <span class="listing">""</span> angegeben, bedeutet dies, dass der X-Server auf demselben lokalen Rechner verwendet werden soll, auf dem das Clientprogramm ausgef&uuml;hrt wird (was wohl bei den meisten Lesern im Moment auch zutrifft). In diesem Fall wird der Leerstring mit dem Inhalt der Umgebungsvariablen <span class="listing">DISPLAY</span> (siehe <span class="listing">echo</span> <span class="listing">$DISPLAY</span>) ersetzt.</p>
<p>In einem netzwerktransparenten Window-System k&ouml;nnen Sie sich mit Ihrer Anwendung &uuml;ber TCP, UNIX Domain Sockets oder DECnet mit dem X-Server verbinden. Die Syntax hierf&uuml;r sieht dann folgenderma&szlig;en aus:</p>
<pre>Hostname:Displaynummer.Screennummer</pre>
<p>Der <span class="listing">Hostname</span> ist der Name des Netzknotens, der mit einem (Verbindung mit TCP) oder zwei Doppelpunkten (Verbindung &uuml;ber DECnet) beendet wird. UNIX-Domain-Socket-Verbindungen werden durch keinen oder den Namen <span class="listing">UNIX</span> gekennzeichnet – was ja eine lokale Verbindung darstellt. Welches Display im Knoten verwendet werden soll, wird mit der <span class="listing">Displaynummer</span>, die aufsteigend nummeriert wird, angegeben. Und da ein Display mehrere Bildschirme besitzen kann, werden diese mit <span class="listing">Screennummer</span> aufsteigend durchnummeriert. Die speziellen Parameter von <span class="listing">XOpenDisplay()</span> seien hier nur erw&auml;hnt – werden aber in den Beispielen des Buches nicht verwendet, da hierbei immer eine Verbindung mit dem lokalen Rechner angefordert wird.</p>
<p>Der R&uuml;ckgabewert der Funktion <span class="listing">XOpenDisplay()</span> liefert Ihnen eine vom Server alloziierte Struktur mit Hunderten von Variablen zur&uuml;ck – die Ihnen (gl&uuml;cklicherweise) egal sein k&ouml;nnen. Die zur&uuml;ckgegebene Struktur ben&ouml;tigen Sie allerdings bei jedem Aufruf einer X-Funktion als ersten Parameter.</p>
<p>Unmittelbar danach sollten Sie auch gleich die Funktion <span class="listing">XDefaultScreen()<a id="Xxx999264" name="Xxx999264"></a></span> mit dem Parameter <span class="listing">display</span> aufrufen. Die Funktion liefert Ihnen eine Integervariable <span class="listing">screen</span> zur&uuml;ck, die Sie ebenfalls bei vielen Funktionen der Xlib ben&ouml;tigen. Meistens ist dieser Wert mit 0 belegt, sofern eine Workstation nicht mehr als einen Bildschirm besitzt.</p>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">14.4.2 Fenster definieren<a id="RxxKap14003040004B71F042117" name="RxxKap14003040004B71F042117"></a> 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Im n&auml;chsten Schritt wird mit der Funktion <span class="listing">XCreateSimpleWindow()<a id="Xxx999267" name="Xxx999267"></a></span> ein einfaches Fenster definiert. Die Funktion hat zwar recht viele Parameter, ist aber einfach zu verwenden:</p>
<pre>rootwin = RootWindow (display, screen);
win = XCreateSimpleWindow ( display, rootwin, 10, 10, 
                            width, height, 5,
                            BlackPixel (display, screen),
                            WhitePixel (display, screen) );</pre>
<p>Als erster Parameter folgt, wie schon erw&auml;hnt, bei jeder X-Funktion ein Zeiger auf die <span class="listing">Display</span>-Struktur. Anschlie&szlig;end bestimmen Sie das Fenster, das Vorg&auml;nger des neuen Fensters wird. In diesem Beispiel ist dies das <span class="listing">root</span>-Fenster (das hei&szlig;t der ganze Bildschirm), das zuvor mit der Funktion <span class="listing">RootWindow()<a id="Xxx999271" name="Xxx999271"></a></span> ermittelt wurde. Mit den Parametern drei und vier geben Sie die <span class="listing">x</span>- und <span class="listing">y</span>-Koordinaten des Fensters (links oben) an (<span class="listing">0,0</span>). Diese Angaben werden aber recht h&auml;ufig von den Window-Managern ignoriert – da diese gerne selbst entscheiden, wo ein neues Fenster platziert wird. Parameter f&uuml;nf und sechs stellen die Breite und H&ouml;he des Fensters dar. Auch der Parameter sieben, der die Randdicke des Fensters darstellt, wird von den meisten Window-Managern ignoriert. Die letzen beiden Parameter beinhalten die Kennziffern f&uuml;r die Farbe des Randes (Parameter acht) und die des Fensterhintergrundes (letzter Parameter). Sie sollten hier keine Zahlen angeben, auch wenn dies funktioniert. Die saubere Schwarz-Wei&szlig;-L&ouml;sung ist die, dass man sich eine f&uuml;r das aktuelle Display g&uuml;ltige Kennziffer mit <span class="listing">BlackPixel()<a id="Xxx999272" name="Xxx999272"></a></span> bzw. <span class="listing">WhitePixel()<a id="Xxx999273" name="Xxx999273"></a></span> beschafft. Als R&uuml;ckgabewert dieser Funktion erhalten Sie erst einmal eine Kennungs-ID des Fensters.</p>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">14.4.3 Informationen f&uuml;r den Window-Manager<a id="RxxKap14003040004B71F042177" name="RxxKap14003040004B71F042177"></a> 
      <a href="#t2t35"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999275" name="Xxx999275"></a>Wenn Sie dem Window-Manager einige Informationen zu einem Fenster zukommen lassen wollen, k&ouml;nnen Sie hierf&uuml;r Funktionen verwenden, die sich auf die Struktur <span class="listing">XSizeHints<a id="Xxx999277" name="Xxx999277"></a></span> beziehen. Dies ist eine Struktur im X-Server, die jedes Fenster besitzt und die der Client, was den Window-Manager mit einschlie&szlig;t, jederzeit abfragen kann. Sie k&ouml;nnen hierzu Funktionen verwenden, die sich auf einzelne Variablen der Struktur <span class="listing">XSizeHints</span> beziehen, oder gleich mehrere Strukturvariablen auf einen Schlag setzen. Ein solcher Vorgang wird wie folgt erledigt:</p>
<pre>char *window_name = "Einfaches Fenster - hallo_x";
char *icon_name = "window";
static XSizeHints size_hints;
...
XCreateSimpleWindow(...);
...
size_hints.flags = PSize | PMinSize | PMaxSize;
size_hints.min_width  =  width;
size_hints.max_width  =  width;
size_hints.min_height = height;
size_hints.max_height = height;
XSetStandardProperties<a id="Xxx999279" name="Xxx999279"></a> ( display, win, window_name,
                         icon_name, None, 0, 0, &amp;size_hints );</pre>
<p>Hier wird zuerst eine Strukturvariable namens <span class="listing">size_hints</span> vom Typ <span class="listing">XSizeHints</span> definiert. Nachdem ein neues Fenster ausgemacht wurde, k&ouml;nnen Sie die einzelnen Strukturkomponenten mit Werten versehen. Mit dem ersten Flag <span class="listing">flags</span> legen Sie z. B. fest, dass die Anwendung die Gr&ouml;&szlig;e des Fensters (<span class="listing">Psize</span>) bestimmt, was die minimale (<span class="listing">PminSize</span>) und maximale (<span class="listing">PmaxSize</span>) Gr&ouml;&szlig;e mit einschlie&szlig;t. Anschlie&szlig;end legen Sie diese minimale bzw. maximale Gr&ouml;&szlig;e mit <span class="listing">min_width</span>, <span class="listing">min_height</span>, <span class="listing">max_width</span> und <span class="listing">max_height</span> fest. Die minimale Gr&ouml;&szlig;e des Top-Level-Windows wird &uuml;brigens immer ben&ouml;tigt. In diesem Beispiel kann das Fenster weder vergr&ouml;&szlig;ert noch verkleinert werden (wohl aber minimiert), da gleiche Gr&ouml;&szlig;en angegeben wurden. Anschlie&szlig;end legen Sie diese Properties mit der Funktion <span class="listing">XSetStandardProperties()</span> f&uuml;r das Fenster mit der ID <span class="listing">win</span> und der Verbindung <span class="listing">display</span> fest. Mit dem dritten Parameter k&ouml;nnen Sie den Titel des Fensters und mit dem vierten Parameter das Icon dazu angeben. Die n&auml;chsten drei Parameter werden ignoriert und mit 0 besetzt. Im letzten Parameter befinden sich die Variablen der Struktur <span class="listing">XSizeHints</span>. Mehr zu dieser Struktur und dessen unz&auml;hligen Funktionen entnehmen Sie bitte wieder der Dokumentation der Xlib oder der Manual Page.</p>
<a name="t34"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t35"></a><h3 class="t3">14.4.4 Fenster anzeigen<a id="RxxKap14003040004B71F04217B" name="RxxKap14003040004B71F04217B"></a> 
      <a href="#t2t36"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t34"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999282" name="Xxx999282"></a>Um das Fenster anzuzeigen, das Sie mit der Funktion <span class="listing">XCreateSimpleWindow()<a id="Xxx999283" name="Xxx999283"></a></span> definiert haben, m&uuml;ssen Sie nur die Funktion <span class="listing">XMapWindow()<a id="Xxx999285" name="Xxx999285"></a></span> mit den Parametern zum <span class="listing">Display</span> und die ID des Fensters verwenden:</p>
<pre>XMapWindow (display, win);</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>Da in den folgenden Beispielen immer auf bestimmte Events (Tastatur, Maus etc.) gewartet wird, wird das Fenster mit der Funktion <span class="listing">XMapWindow()</span> auch immer gleich angezeigt. Da, wie bereits erw&auml;hnt, die Funktionsaufrufe vom Client in einem Puffer gehalten werden, bis dieser voll ist, m&uuml;ssen Sie, wenn Sie keine Events in Ihrer Anwendung erwarten, die Funktion <span class="listing">XFlush<a id="Xxx999290" name="Xxx999290"></a>(display)</span> verwenden, um den Puffer explizit von Hand zu leeren. Beim Eintreffen von Events wird dieser Puffer sonst immer automatisch geleert.</p>
</td>
</tr>
</table><br>
<a name="t35"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t36"></a><h3 class="t3">14.4.5 Fenster und X-Verbindung beenden<a id="RxxKap14003040004B71F042180" name="RxxKap14003040004B71F042180"></a> 
      <a href="#t2t37"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t35"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999293" name="Xxx999293"></a><a id="Xxx999294" name="Xxx999294"></a>Beides wird eigentlich bei Beendigung des Programms automatisch durchgef&uuml;hrt; doch wie es sich in C mit dem Schlie&szlig;en von Filedeskriptoren usw. geh&ouml;rt, sollten Sie auch hier das Fenster mit der Funktion <span class="listing">XDestroyWindow()<a id="Xxx999296" name="Xxx999296"></a></span> schlie&szlig;en und den Kontakt mit dem Server mit der Funktion <span class="listing">XCloseDisplay()<a id="Xxx999297" name="Xxx999297"></a></span> beenden:</p>
<pre>XDestroyWindow(display, win);
XCloseDisplay(display);</pre>
<a name="t36"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t37"></a><h3 class="t3">14.4.6 Das Grundger&uuml;st als Quellcode<a id="RxxKap14003040004B71F042183" name="RxxKap14003040004B71F042183"></a> 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t36"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Jetzt finden Sie im folgenden Beispiel viele dieser Funktionen wieder. Beim Grundger&uuml;st sollten Sie sich erst nur f&uuml;r die Funktion <span class="listing">create_window()</span> interessieren. Die Events werden erst im n&auml;chsten Kapitel beschrieben.</p>
<pre><a id="Xxx999301" name="Xxx999301"></a>/* hallo_x.c */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;X11/keysym.h&gt;
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/Xutil.h&gt;
#define WINDOW_WIDTH 400
#define WINDOW_HEIGHT 300
/* Funktionsprototypen */
static int create_window (void);
static void process_event (XEvent report);
static void eventloop (void);
static void close_window (void);
/* Globale Variablen */
static unsigned int width, height;
static Display *display;
static int screen;
static int depth;
static Window win;
/* Funktion erzeugt ein Fenster */
static int create_window (void) {
  char *window_name = "Einfaches Fenster - hallo_x";
  char *icon_name = "window";
  static XSizeHints size_hints;
  Window rootwin;
  width = WINDOW_WIDTH;
  height = WINDOW_HEIGHT;
  /* X-Sitzung &ouml;ffnen */
  display = XOpenDisplay (NULL);
  /* Fehler&uuml;berpr&uuml;fung */
  if (display == NULL) {
    printf ("Verbindung zum X-Server fehlgeschlagen?!?\n");
    exit(EXIT_FAILURE);
  }
  /* Standardbildschirm eines Displays */
  screen = XDefaultScreen (display);
  /* Standardtiefe des Screens - Anzahl der Ebenen */
  depth = XDefaultDepth (display, screen);
  rootwin = RootWindow (display, screen);
  win = XCreateSimpleWindow ( display, rootwin, 100, 10,
                              width, height, 5,
                              BlackPixel (display, screen),
                              WhitePixel (display, screen) );
  size_hints.flags = PSize | PMinSize | PMaxSize;
  size_hints.min_width =  width;
  size_hints.max_width =  width;
  size_hints.min_height = height;
  size_hints.max_height = height;
  XSetStandardProperties ( display, win, window_name, icon_name,
                           None, 0, 0, &amp;size_hints );
  /* Erw&uuml;nschte Events, auf die das Fenster reagieren soll ... */
  XSelectInput (display, win, ButtonPressMask | KeyPressMask);
  /* Fenster anzeigen */
  XMapWindow (display, win);
  return 1;
}
static void close_window (void) {
  XDestroyWindow(display, win);
  XCloseDisplay (display);
}
static void eventloop (void) {
  XEvent xev;
  int num_events;
  XFlush (display);
  num_events = XPending (display);
  while ((num_events != 0)) {
     num_events--;
     XNextEvent (display, &amp;xev);
     process_event (xev);
  }
}
static void process_event (XEvent report) {
  KeySym key;
  switch (report.type) {
  case KeyPress:
    key = XLookupKeysym (&amp;report.xkey, 0);
    if(key) {
      printf("Tastatur-Event\n");
    }
    break;
  case ButtonPressMask:
    printf ("Maus-Event\n");
    break;
  default:
    break;
  }
}
int main (int argc, char **argv) {
  int quit = 0;
  create_window ();
  while (!quit) {
    eventloop ();
  }
  close_window ();
  return EXIT_SUCCESS;
}</pre>
<p>Das Programm bei der Ausf&uuml;hrung:</p>
<pre>$ gcc -o hallo_x hallo_x.c -L/usr/X11R6/lib -lX11
$ ./hallo_x</pre>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext">
<p><a name="bild"></a><a href="#bild" onClick="OpenWin('bilder/14_1.gif','Abbildung',600,600)"><img border="0" src="bilderklein/klein14_1.gif" alt="Abbildung"><br><span class="tabunter">Hier klicken, um das Bild zu vergr&ouml;&szlig;ern</span></a></p>
<p class="tabunter"><b>Abbildung 14.1   
    </b>Ein einfaches Fenster mit der Xlib</p>
</td>
</tr>
</table><br>
<p>Bei einem Blick auf die Systemressourcen werden Sie jetzt bei diesem einfachen Fenster mit Schrecken Folgendes feststellen. Starten Sie hierzu in der Kommandozeile das Tool top:</p>
<pre>PID USER PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  Command 
2581 tot 25  0   1112 1108  900 R 99.0  0.4   0:32.02 hallo_x
2582 tot 15  0    884  884  696 R  0.7  0.3   0:00.21 top
1959 tot 15  0  14296  13m  12m S  0.3  5.6   0:01.94 kdeinit
1 root   15  0    244  244  208 S  0.0  0.1   0:04.43 init</pre>
<p><a id="Xxx999314" name="Xxx999314"></a>Das einfache Fenster beansprucht je nach Rechenleistung fast die komplette CPU f&uuml;r sich!? Das Problem liegt darin, dass das Programm andauernd in einer Endlosschleife nach eintreffenden Events &uuml;berpr&uuml;ft, was nicht unbedingt n&uuml;tzlich ist, wie man erkennen kann. Sie ben&ouml;tigen hierzu einen Timer, der nach jedem Schleifenaufruf das Programm ein wenig anh&auml;lt. Dazu m&uuml;ssen Sie lediglich eine Funktion wie z. B. <span class="listing">gettimeofday()<a id="Xxx999316" name="Xxx999316"></a></span> und einen eigene <span class="listing">delay()</span>-Funktion zusammenbasteln – um damit eine entsprechende Verz&ouml;gerung einzubauen.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>Um auf den folgenden Seiten ein wenig Platz zu sparen, wird f&uuml;r diese Verz&ouml;gerung extra eine (Header-)Datei (<span class="listing">my_delay.h</span>) ausgelagert, die Sie bei allen folgenden Listings ben&ouml;tigen.</p>
</td>
</tr>
</table><br>
<pre><a id="Xxx999321" name="Xxx999321"></a>/* my_delay.h */
#include &lt;sys/time.h&gt;
#define FRAME_LEN 50000
static struct timeval st, rt;
static int delay(int i) {
  struct timeval timeout;
  if (i&gt;0) {
    timeout.tv_usec = i % (unsigned long) 1000000;
    timeout.tv_sec = i / (unsigned long) 1000000;
    select(0, NULL, NULL, NULL, &amp;timeout);
  }
  return (i&gt;0 ? i : 0);
}
static int time_diff(void) {
  int diff;
  gettimeofday(&amp;rt, NULL);
  diff = (1000000*(rt.tv_sec-st.tv_sec))+(rt.tv_usec-st.tv_usec);
  st = rt;
  return diff;
}</pre>
<p>Hierzu nochmals das Beispiel von eben (<span class="listing">hallo_x.c</span>), nur mit den neu erstellten Funktionen <span class="listing">time_diff()</span> und <span class="listing">delay()</span>. Es m&uuml;ssen nur die in Fettschrift hervorgehobenen Stellen hinzugef&uuml;gt werden.</p>
<pre><a id="Xxx999324" name="Xxx999324"></a>/* hallo_x2.c */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;X11/keysym.h&gt;
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/Xutil.h&gt;
#include "my_delay.h"
#define WINDOW_WIDTH 400
#define WINDOW_HEIGHT 300
/* Funktionsprototypen */
static int create_window (void);
static void process_event (XEvent report);
static void eventloop (void);
static void close_window (void);
extern int delay(int i);
extern int time_diff(void);
/* Globale Variablen */
static unsigned int width, height;
static Display *display;
static int screen;
static int depth;
static Window win;
/* Die Funktionen create_window(), process_event(), eventloop(),
 * close_window() bitte vom Listing hallo_x.c &uuml;bernehmen oder das
 * komplette Listing auf der Buch-CD verwenden
 */
int main(int argc, char **argv) {
  int quit = 0;
  int pause = 0;
  int td;
  create_window();
  gettimeofday(&amp;st, NULL);
  while(!quit) {
    gettimeofday(&amp;rt, NULL);
    td = time_diff();
    pause = delay(FRAME_LEN - td + pause);
    st = rt;
    eventloop();
  }
  close_window();
  return EXIT_SUCCESS;
}</pre>
<p>Die Ver&auml;nderung des Listings sollte sich jetzt auf die Auslastung des Systems bezogen gegen&uuml;ber der vorherigen Version positiv bemerkbar machen.</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-002.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-004.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-003.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:45:55 GMT -->
</html>
