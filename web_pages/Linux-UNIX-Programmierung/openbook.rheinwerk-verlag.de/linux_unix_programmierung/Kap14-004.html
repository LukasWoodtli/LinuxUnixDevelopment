<html>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-004.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:58:37 GMT -->
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Linux-UNIX-Programmierung – 14.5 Events</title>
<meta name="title" content="Linux-UNIX-Programmierung">
<meta name="author" content="J&uuml;rgen Wolf">
<meta name="publisher" content="Rheinwerk Verlag GmbH 2006">
<meta name="copyright" content="Rheinwerk Verlag GmbH 2006">
<meta name="description" content="Linux-UNIX-Programmierung - Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006 – ISBN 3-89842-749-8">
<meta name="audience" content="Alle">
<meta name="robots" content="INDEX,FOLLOW">
<meta http-equiv="content-language" content="de">
<link rel="stylesheet" type="text/css" href="common/rw_open.css">
<link rel="prev" href="Kap14-003.html">
<link rel="next" href="Kap14-005.html"><script type="text/javascript" language="JavaScript"><!--
function OpenWin(url,name,height,width)
{
  var InfoWin = window.open(url,name,"directories=0,height="+height+",width=" + width + ",hotkeys=0,location=0,menubar=0,resizable=1,screenX=150,screenY=10,left=150,top=10,scrollbars=1,status=1,titlebar=0,toolbar=0");
  InfoWin.focus();
}
//--></script></head>
<body vlink="#000099" link="#000099" alink="#000099">
<table width="100%" height="74" border="0" cellpadding="0" cellspacing="0" bgcolor="#00549d">
<tr>
<td height="74" valign="bottom" colspan="2"><a href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"><img src="common/rw_openbook.gif" width="200" height="56" border="0" alt="Rheinwerk Computing < openbook >"></a></td>
<td width="80" height="74">
<a href="https://www.rheinwerk-verlag.de/?GPP=oplup"><img src="common/rw_computing.gif" border="0" alt="Rheinwerk Computing - Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger."></a>
</td>
</tr>
</table><div align="right"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Professionelle B&uuml;cher. Auch f&uuml;r Einsteiger</a></div><br /><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="156" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="100%" align="left">
<tr>
<td colspan="2" class="nav1" align="left" valign="top" height="150">
<table class="tbl1" width="150" border="0" cellpadding="3" cellspacing="0">
<tr>
<td class="tbl2" height="25"><A class="nav" href="index-2.html">Inhaltsverzeichnis</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00a-000.html#Xxx999195">Vorwort des Autors</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap00b-000.html#Xxx999195">Vorwort der Fachgutachter</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap01-000.html#Xxx999235">1 Einf&uuml;hrung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap02-000.html#Xxx999234">2 E/A-Funktionen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap03-000.html#Xxx999234">3 Attribute von Dateien und Verzeichnissen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap04-000.html#Xxx999234">4 Zugriff auf Systeminformationen</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap05-000.html#Xxx999234">5 Devices – eine einfache Verbindung zur Hardware</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap06-000.html#Xxx999234">6 System- und Benutzerdateien</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap07-000.html#Xxx999234">7 D&auml;monen, Zombies und Prozesse</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap08-000.html#Xxx999235">8 Signale</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap09-000.html#Xxx999235">9 IPC – Interprozesskommunikation</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap10-000.html#Xxx999234">10 Threads</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap11-000.html#Xxx999235">11 Netzwerkprogrammierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap12-000.html#Xxx999236">12 MySQL und PostgreSQL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap13-000.html#Xxx999235">13 Terminal E/A und Benutzerschnittstellen f&uuml;r die Konsole</A></td>
</tr>
<tr>
<td><A class="navnavh" href="Kap14-000.html#Xxx999235">14 Xlib – X Window-Programmierung</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap15-000.html#Xxx999235">15 GTK+</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap16-000.html#Xxx999235">16 SDL</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap17-000.html#Xxx999247">17 Werkzeuge f&uuml;r Programmierer</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18A-000.html#Xxx999248">A Sicherheit unter Linux</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18B-000.html#Xxx999245">B Funktionsreferenz</A></td>
</tr>
<tr>
<td><A class="navnav" href="Kap18C-000.html#Xxx999245">C Inhalt der Buch-CD</A></td>
</tr>
<tr>
<td><A class="navnav" href="stichwort.html#Xxx537584">Index</A></td>
</tr>
<tr><td><br /><!--<a class="navnav" href="http://download.galileo-press.de/openbook/lup/galileocomputing_linux_unix_programmierung.zip"><strong>Download:</strong><br />- ZIP, ca. 4,3 MB</a></td></tr>
<tr><td><a class="navnav" href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup">Buch bestellen</a></td></tr>
<tr><td>--><a class="navnav" href="https://www.rheinwerk-verlag.de/feedback/">Ihre Meinung?</a><br /><br /></td></tr>
</table></td>
</tr>

</table>
</td>
<td width="10"><img src="common/spacer10.gif" width="10" height="10"></td>
<td width="85%" valign="top" align="center">
<div align="center">
<table width="98%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-003.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navnav">Rheinwerk Computing /</a><a class="navnav" href="https://www.rheinwerk-verlag.de/openbook/?GPP=oplup"> &lt;openbook&gt; /</a> <a href="index-2.html" class="navnav"> Linux-UNIX-Programmierung</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-005.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" valign="top">
<table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
<tr>
<td colspan="2"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup" class="buchtitel">Linux-UNIX-Programmierung</a><span class="autor"> von J&uuml;rgen Wolf</span><br><span class="untertitel">Das umfassende Handbuch – 2., aktualisierte und erweiterte Auflage 2006</span></td>
</tr>
<tr>
<td valign="top" width="90"><a href="https://www.rheinwerk-verlag.de/1137/?GPP=oplup"><img src="common/9783898427494.gif" border="0" alt="Buch: Linux-UNIX-Programmierung" title="Buch: Linux-UNIX-Programmierung" align="left"><br /><br /><span class="autor"><strong>Linux-UNIX-Programmierung</strong><br />1216 S., mit CD, 49,90 Euro<br />Rheinwerk Computing<br />ISBN 3-89842-749-8</span></a></a></td>
<td width="80%">
<table border="0">
<tr>
<td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="3" class="kap"><b>Kapitel <a href="Kap14-000.html#RxxKap14000040004981F014100">14 Xlib – X Window-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-000.html#RxxKap14000040004981F014105">14.1 Architektur von X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F01410F">14.1.1 Pufferung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-000.html#RxxKap14000040004981F014114">14.1.2 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-001.html#RxxKap14001040004B51F018100">14.2 X Toolkit</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-002.html#RxxKap14002040004B61F03B100">14.3 Der Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-003.html#RxxKap14003040004B71F042100">14.4 Fenster mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F04210E">14.4.1 Verbindung herstellen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042117">14.4.2 Fenster definieren</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042177">14.4.3 Informationen f&uuml;r den Window-Manager</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F04217B">14.4.4 Fenster anzeigen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042180">14.4.5 Fenster und X-Verbindung beenden</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-003.html#RxxKap14003040004B71F042183">14.4.6 Das Grundger&uuml;st als Quellcode</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a class="navh2" href="#RxxKap14004040004B81F029100">14.5 Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F029104">14.5.1 Event-Maske setzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F029180">14.5.2 Event-Bearbeitungsschleife</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F029187">14.5.3 Abarbeitung der Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F02918A">14.5.4 Tastatur-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F029190">14.5.5 Mausbutton-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F0291A2">14.5.6 Expose-Event</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F0291A6">14.5.7 EnterWindowMask – LeaveWindowMask</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a class="navh2" href="#RxxKap14004040004B81F0291A8">14.5.8 Listing zu den Events</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-005.html#RxxKap14005040004B91F038100">14.6 Grafik mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-005.html#RxxKap14005040004B91F038105">14.6.1 Grafikprimitive – Zeichenfunktionen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-006.html#RxxKap14006040004BA1F040100">14.7 Text mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040102">14.7.1 Fonts benutzen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F04010E">14.7.2 &Uuml;bersicht zu den Fonts</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040181">14.7.3 H&ouml;he und Breite ermitteln</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-006.html#RxxKap14006040004BA1F040187">14.7.4 Listing mit Textausgabe</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-007.html#RxxKap14007040004BB1F032100">14.8 Farben mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-008.html#RxxKap14008040004BC1F019100">14.9 Beispiel – ein Button mit X</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-009.html#RxxKap14009040004BD1F036100">14.10 Wozu kann ich denn nun die Xlib in der Praxis verwenden?</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-010.html#RxxKap14010040004BE1F03A100">14.11 X und X-Toolkits – Einf&uuml;hrung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-011.html#RxxKap14011040004BF1F01F100">14.12 Toolkit-Programmierung</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-011.html#RxxKap14011040004BF1F01F103">14.12.1 Widgets</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-012.html#RxxKap14012040004C01F020100">14.13 Ein einfaches Fenster mit einem Button</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline"><b><T3Verw><a href="Kap14-012.html#RxxKap14012040004C01F02010E">14.13.1 Ressourcen</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-013.html#RxxKap14013040004C11F018100">14.14 Zwei Buttons in Box- und Form-Widget mit Textausgabe (Label-Widget)</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-014.html#RxxKap14014040004C21F037100">14.15 editres – Widget-Hierarchie</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-015.html#RxxKap14015040004C31F020100">14.16 Texteingabe mit Dialog-Widget</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-016.html#RxxKap14016040004C41F01E100">14.17 X-Toolkits meets Xlib</a></b></td>
</tr>
<tr>
<td valign="baseline" width="10"> </td>
<td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="gp"></td>
<td valign="baseline" colspan="2"><b><a href="Kap14-017.html#RxxKap14017040004C51F045100">14.18 Zusammenfassung</a></b></td>
</tr>
</table><br></td>
</tr>
</table>
<table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
<tr>
<td>
<a name="t21"></a><a name="t2t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div>
<h2 class="t2">14.5 <a id="RxxKap1490Events" name="RxxKap1490Events"></a>Even<a id="RxxKap14004040004B81F029100" name="RxxKap14004040004B81F029100"></a>ts 
      <a href="#t2t32"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"></h2>
<p><a id="Xxx999236" name="Xxx999236"></a><a id="Xxx999237" name="Xxx999237"></a>Ein Event (Ereignis) ist eine Nachricht vom Server an den Client, womit der Client &uuml;ber eine bestimmte Aktion informiert wird. Meistens handelt es sich dabei um Mausaktionen oder Tastatureingaben. Im Prinzip wird &uuml;ber Events das ganze Programm gesteuert. Die Events sind, um es genau zu nehmen, auch wieder nichts anderes als eine (komplexe) Datenstruktur, die vom Server an den Client geschickt wird. Folgende Dinge m&uuml;ssen immer gemacht werden, damit die Events auch funktionieren:</p>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Event-Maske setzen – Es macht keinen Sinn, wenn der Server auf jedes Event eines jeden Speicherobjektes reagiert – von der &Uuml;berlastung des X-Servers dabei ganz zu schweigen. Welchen Sinn w&uuml;rde es denn ergeben, wenn der Server die Bewegung des Mauscursors, der sich &uuml;ber einem Button befindet, registriert und an den Client schickt? Daher verf&uuml;gt X &uuml;ber eine Event-Maske, womit es m&ouml;glich ist, von allen Events, die es gibt, nur eine gewisse Auswahl zu selektieren, die in der Anwendung auch wirklich ben&ouml;tigt wird.</td>
</tr>
</table>
<table width="100%" border="0">
<tr>
<td valign="baseline" width="16"><img src="common/gp.gif" width="8" height="9" border="0" alt="gp"> 
        </td>
<td valign="top" width="100%" align="left"> Event-Bearbeitungsschleife – Klar, dass bei regen Zeiten sehr viele Events auftreten, die nicht alle auf einmal abgearbeitet werden k&ouml;nnen. Daher verwendet man eine Event-Bearbeitungsschleife. In der Schleife holen Sie aus einem Event-Puffer ein Event nach dem anderen ab (sofern eines vorhanden ist) und werten dieses aus – mit einer anschlie&szlig;enden Reaktion, die Sie f&uuml;r das Event vorsehen.</td>
</tr>
</table>
<a name="t31"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t32"></a><h3 class="t3">14.5.1 Event-Maske setzen<a id="RxxKap14004040004B81F029104" name="RxxKap14004040004B81F029104"></a> 
      <a href="#t2t33"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t31"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999244" name="Xxx999244"></a>Der erste Schritt besteht also darin, eine Event-Maske zu setzen, die man f&uuml;r die Anwendung ben&ouml;tigt. Dazu wird der Befehl <span class="listing">XSelectInput()<a id="Xxx999246" name="Xxx999246"></a></span> wie folgt verwendet:</p>
<pre>XSelectInput(display, win,
             ButtonPressMask | ButtonReleaseMask | KeyPressMask |
             KeyReleaseMask  | EnterWindowMask   | ExposureMask |
             LeaveWindowMask );
XMapWindow (display, win);</pre>
<p>Wie Sie daran erkennen k&ouml;nnen, werden mehrere Masken des dritten Parameters durch ein bitweises ODER verkn&uuml;pft. Die ersten beiden Parameter sind so weit nichts Neues mehr. Des Weiteren sollte dieser Befehl noch vor der Funktion <span class="listing">XMapWindow()</span> aufgerufen werden, da beim Erzeugen des Fensters schon das <span class="listing">Expose</span>-Event verschickt wird. Welche Event-Maske(n) Sie hierf&uuml;r verwenden sollten, h&auml;ngt von Ihrer Anwendung ab. Hierzu ein &Uuml;berblick zu einigen Event-Masken, die auch im Buch angewendet werden.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle 14.1   
    </b>H&auml;ufig verwendete Event-Masken und deren Events</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Event-Maske</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Bedeutung</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Events</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ButtonPressMask
</td>
<td class="tabellentext" bgcolor="#000000">Maustaste im Fenster gedr&uuml;ckt
</td>
<td class="tabellentext" bgcolor="#000000">ButtonPress
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ButtonReleaseMask
</td>
<td class="tabellentext" bgcolor="#000000">Maustaste im Fenster losgelassen
</td>
<td class="tabellentext" bgcolor="#000000">ButtonRelease
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">KeyPressMask
</td>
<td class="tabellentext" bgcolor="#000000">Eine Taste niedergedr&uuml;ckt
</td>
<td class="tabellentext" bgcolor="#000000">KeyPress
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">KeyReleaseMask
</td>
<td class="tabellentext" bgcolor="#000000">Eine Taste losgelassen
</td>
<td class="tabellentext" bgcolor="#000000">KeyRelease
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">EnterWindowMask
</td>
<td class="tabellentext" bgcolor="#000000">Mauscursor tritt ins Fenster ein
</td>
<td class="tabellentext" bgcolor="#000000">EnterNotify
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">LeaveWindowMask
</td>
<td class="tabellentext" bgcolor="#000000">Mauscursor verl&auml;sst das Fenster
</td>
<td class="tabellentext" bgcolor="#000000">LeaveNotify
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">ExposureMask
</td>
<td class="tabellentext" bgcolor="#000000">Anwendung muss etwas zeichnen
</td>
<td class="tabellentext" bgcolor="#000000">Expose
</td>
</tr>
</table><br>
<a name="t32"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t33"></a><h3 class="t3">14.5.2  Event-Bearbeitungsschleife<a id="RxxKap14004040004B81F029180" name="RxxKap14004040004B81F029180"></a> 
      <a href="#t2t34"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t32"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999309" name="Xxx999309"></a>Wenn Sie die Maske f&uuml;r die Events gesetzt haben, k&ouml;nnen Sie die Event-Bearbeitungsschleife erstellen, die von jetzt an bis zur Beendigung des Programms durchlaufen wird. Diese Schleife wird im Beispiel in der Hauptfunktion mit folgendem Konstrukt ausgef&uuml;hrt:</p>
<pre>   while (!quit) {
      /* +++ Timer Anfang +++ */
      gettimeofday (&amp;rt, NULL);
      td = time_diff ();
      pause = delay (FRAME_LEN - td + pause);
      st = rt;
      /* +++ Timer Ende */
      eventloop ();
   }</pre>
<p>Der Timer stellt »nur« eine Entlastung f&uuml;r die CPU dar, was bereits im Listing zuvor beschrieben wurde, und hat somit nicht direkt etwas mit der Event-Bearbeitungsschleife zu tun. Die Funktion <span class="listing">eventloop()</span>, die in dieser Schleife die Events bearbeitet, sieht so aus:</p>
<pre>static void eventloop (void) {
   XEvent xev;
   int num_events;
   XFlush (display);
   num_events = XPending (display);
   while ((num_events != 0)) {
      num_events--;
      XNextEvent (display, &amp;xev);
      process_event (xev);
   }
}</pre>
<p>Zuerst flushen Sie den Puffer der X-Aufrufe mit der Funktion <span class="listing">XFlush()<a id="Xxx999314" name="Xxx999314"></a></span>, der ja ansonsten nur entleert w&uuml;rde, wenn er voll ist. Anschlie&szlig;end &uuml;berpr&uuml;fen Sie mit der Funktion <span class="listing">XPending()<a id="Xxx999316" name="Xxx999316"></a></span>, ob &uuml;berhaupt ein Event in der Event-Warteschlange vorhanden ist. Wenn nicht, wird der n&auml;chste Schleifenaufruf erst gar nicht ausgef&uuml;hrt, und die Anwendung kehrt zur <span class="listing">main()</span>-Funktion in die Event-Bearbeitungsschleife zur&uuml;ck. Befindet sich mindestens ein Event im Event-Puffer (<span class="listing">num_events</span> <span class="listing">!=</span> <span class="listing">0</span>), holen Sie dieses mit der Funktion <span class="listing">XNextEvent()<a id="Xxx999317" name="Xxx999317"></a></span> ab. Der erste Parameter ist wie immer der des Servers, der zweite ist eine Adresse vom Typ <span class="listing">XEvent</span>. <span class="listing">XEvent</span> ist wiederum eine Struktur, die das angekommene Event beinhaltet. Sie k&ouml;nnten dieses Event zwar jetzt schon abarbeiten, aber aus &Uuml;bersichtlichkeitsgr&uuml;nden &uuml;bergeben Sie <span class="listing">XEvent</span> <span class="listing">xev</span> an die Funktion <span class="listing">process_event()</span>, die das angekommene Event abarbeitet (dazu gleich mehr).</p>
<p>Sicherlich f&auml;llt Ihnen an der Funktion <span class="listing">XNextEvent()</span> auf, dass hier kein Parameter <span class="listing">win</span> f&uuml;r das Fenster verwendet wird. Aber in der Event-Struktur <span class="listing">XEvent</span> ist dazu nat&uuml;rlich eine Kennung enthalten, zu welchem Fenster welches Event geh&ouml;rt, f&uuml;r den Fall, wenn mehrere Fenster pro Anwendung ge&ouml;ffnet wurden.</p>
<a name="t33"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t34"></a><h3 class="t3">14.5.3 Abarbeitung der Events<a id="RxxKap14004040004B81F029187" name="RxxKap14004040004B81F029187"></a> 
      <a href="#t2t35"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t33"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Zur Abarbeitung der einzelnen Events wurde hier die Funktion <span class="listing">process_event()</span> mit dem auftretenden Event (<span class="listing">XEvent</span>) aufgerufen:</p>
<pre>static void process_event (XEvent report) {
...
   switch (report.type) {
     /* Events abfragen mit case-Statements */
   }
}</pre>
<a name="t34"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t35"></a><h3 class="t3">14.5.4 Tastatur-Event<a id="RxxKap14004040004B81F02918A" name="RxxKap14004040004B81F02918A"></a> 
      <a href="#t2t36"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t34"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999323" name="Xxx999323"></a>Ein Tastatur-Event wie <span class="listing">KeyPress</span> oder <span class="listing">KeyRelease</span> erhalten Sie gew&ouml;hnlich, wenn der Window-Manager den Tastaturfokus an ein Fenster &uuml;bergeben hat. Meistens ist dies der Fall, wenn sich der Mauszeiger darin befindet. Wenn ein <span class="listing">KeyPress</span>-Event oder ein <span class="listing">KeyRelease</span>-Event aufgetreten ist, k&ouml;nnen Sie mit einer Behandlungsroutine das Zeichen lesen. Welches Zeichen das denn nun war, kann z. B. mit der Funktion <span class="listing">XLookupString()<a id="Xxx999325" name="Xxx999325"></a></span> ermittelt werden:</p>
<pre>XLookupString (&amp;report.xkey, buf, bufsz, &amp;key, NULL);</pre>
<p>Die Funktion &uuml;bersetzt ein Tastatur-Event, das Sie zuvor mit der Funktion <span class="listing">XLookupKeysym()<a id="Xxx999327" name="Xxx999327"></a></span> ermittelt haben, in einen String. Der erste Parameter ist das Event, im zweiten wird anschlie&szlig;end der String mit maximal <span class="listing">bufsz</span> (dritter Parameter) Bytes beschrieben. Der vierte Parameter enth&auml;lt den Tastaturcode, den Sie mit <span class="listing">XLookupKeysym()</span> ermittelt haben. Der letzte Parameter wird hier nicht ben&ouml;tigt.</p>
<p>Solange es sich bei der Taste um ein ASCII-Zeichen wie Buchstaben- und Zahlentasten oder die Zeichen: <span class="listing">=</span> – <span class="listing">\</span> <span class="listing">+</span> <b>(DEL)</b> <span class="listing">[</span> <span class="listing">]</span> <b>(ESC)</b> <span class="listing">/</span> <span class="listing">'</span> <span class="listing">`</span> <span class="listing">;</span> <b>(ÿ_)</b> <span class="listing">.</span> <span class="listing">,</span> <b>(CR)</b> <b>(LF)</b> <b>(æ___)</b> handelt, ist man mit <span class="listing">XLookupString()</span> gut bedient (<b>(º_)</b> wird auch ber&uuml;cksichtigt). Wenn es sich allerdings um kein ASCII-Zeichen handelt, ist der String <span class="listing">buf</span> von <span class="listing">XLookupString()</span> leer. Dies ist z. B. beim Bet&auml;tigen der Tasten <b>(ª)</b>, <b>(Ctrl)</b>, <b>(F1)</b>, <b>(F2)</b> usw. der Fall. In diesem Fall kann man den Tastaturcode, der von der Funktion <span class="listing">XLookupKeysym()</span> zur&uuml;ckgegeben wird, mit der Funktion <span class="listing">XKeysymToString()<a id="Xxx999330" name="Xxx999330"></a></span> in einen String konvertieren. Den Tastaturcode selbst k&ouml;nnen Sie sich mit der Funktion <span class="listing">XKeysymToKeycode()<a id="Xxx999331" name="Xxx999331"></a></span> ermitteln lassen. Hierzu der Vorgang beim Dr&uuml;cken bzw. Loslassen einer Taste:</p>
<pre>...
KeySym key;
char buf[128] = { 0 };
int bufsz = 128;
...
switch (report.type) {
case KeyPress:
   key = XLookupKeysym (&amp;report.xkey, 0);
   XLookupString (&amp;report.xkey, buf, bufsz, &amp;key, NULL);
   if (strlen (buf) != 0 &amp;&amp; buf[0] != '\n' &amp;&amp; buf[0] != '\r')
      printf ("Taste'%s' (Tasturcode: %d) wurde gedr&uuml;ckt\n",
         buf, XKeysymToKeycode (display, key));
   else
      printf ("Taste '%s' (Tasturcode: %d) wurde gedr&uuml;ckt\n",
         XKeysymToString (key), XKeysymToKeycode (display, key));
   break;
case KeyRelease:
   printf ("Taste wieder losgelassen\n");
   break;
...</pre>
<a name="t35"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t36"></a><h3 class="t3">14.5.5 Mausbutton-Event<a id="RxxKap14004040004B81F029190" name="RxxKap14004040004B81F029190"></a> 
      <a href="#t2t37"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t35"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999334" name="Xxx999334"></a>Wenn eine Maustaste innerhalb eines Fensters gedr&uuml;ckt bzw. losgelassen wurde, treffen die Events <span class="listing">ButtonPress</span> bzw. <span class="listing">ButtonRelease</span> ein. Wenn das Fenster bei gedr&uuml;ckter Maustaste verlassen und au&szlig;erhalb losgelassen wird, wird dennoch das Event <span class="listing">ButtonRelease</span> gesendet. Wollen Sie wissen, welche Maustaste gedr&uuml;ckt bzw. losgelassen wurde, m&uuml;ssen Sie report.xbutton.button (wobei <span class="listing">report</span> vom Typ <span class="listing">XEvent</span> ist) auswerten. Darin befindet sich ein Integerwert mit folgenden Bedeutungen:</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<caption class="tabunter">
<p><span class="tabunter"><b>Tabelle 14.2   
    </b>Integerwerte f&uuml;r das Dr&uuml;cken eines bestimmten Mausbuttons</span></p>
</caption>
<tr>
<td class="tabellenkopf" bgcolor="#000000"><b>Mausaktion</b>
</td>
<td class="tabellenkopf" bgcolor="#000000"><b>Integerwert</b>
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">linke Maustaste
</td>
<td class="tabellentext" bgcolor="#000000">1
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">rechte Maustaste
</td>
<td class="tabellentext" bgcolor="#000000">3
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">mittlere Maustaste
</td>
<td class="tabellentext" bgcolor="#000000">2
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Scrollrad nach oben
</td>
<td class="tabellentext" bgcolor="#000000">4
</td>
</tr>
<tr>
<td class="tabellentext" bgcolor="#000000">Scrollrad nach unten
</td>
<td class="tabellentext" bgcolor="#000000">5
</td>
</tr>
</table><br>
<p>Wollen Sie hingegen &uuml;berpr&uuml;fen, an welcher Stelle die Maustaste gedr&uuml;ckt bzw. losgelassen wurde, m&uuml;ssen Sie f&uuml;r die X-Position report.xbutton.x und f&uuml;r die Y-Position report.xbutton.y auswerten. Dabei wird jeweils ein Wert relativ von der linken oberen Seite des Fensters zur&uuml;ckgeliefert.</p>
<a name="t36"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t37"></a><h3 class="t3">14.5.6 Expose-Event<a id="RxxKap14004040004B81F0291A2" name="RxxKap14004040004B81F0291A2"></a> 
      <a href="#t2t38"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t36"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p><a id="Xxx999371" name="Xxx999371"></a>Wenn das Fenster erzeugt, verkleinert, vergr&ouml;&szlig;ert, minimiert oder von einem anderen Fenster &uuml;berdeckt wurde, wird das Expose-Event mitgeschickt. Dieses Event zeigt der Anwendung an, dass der Fensterinhalt neu gezeichnet werden muss. Beim Verschieben hingegen wird kein Expose-Event gesendet, da hierbei der Window-Manager daf&uuml;r sorgt, dass ein Fenster wieder hergestellt wird.</p>
<br><table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td class="tabellentext" bgcolor="#000000">
<p class="BStandard"><b>Hinweis   </b>Das Expose-Event ist weitaus anspruchsvoller, als in diesem Buch dargestellt wird, denn h&auml;ufig muss nur ein rechteckiger Detailausschnitt des Fensters neu gezeichnet werden. In diesem Fall wird eine Folge von <span class="listing">Expose</span>-Events mit einer Variablen <span class="listing">myevent.xexpose.count</span> <span class="listing">&gt;</span> <span class="listing">0</span> erzeugt. </p>
</td>
</tr>
</table><br>
<a name="t37"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t38"></a><h3 class="t3">14.5.7 EnterWindowMask – LeaveWindowMask<a id="RxxKap14004040004B81F0291A6" name="RxxKap14004040004B81F0291A6"></a> 
      <a href="#t2t39"><img src="common/down.gif" width="15" height="15" border="0" alt="down"></a><a href="#t2t37"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Sobald der Cursor das Fenster betritt, wird das Event <span class="listing">EnterNotify</span> gesendet, und beim Verlassen des Cursors das Event <span class="listing">LeaveNotify</span>.</p>
<a name="t38"></a><br><div align="center"><a href="#top"><img src="common/top.gif" border="0" alt="Rheinwerk Computing"></a></div><a name="t2t39"></a><h3 class="t3">14.5.8 Listing zu den Events<a id="RxxKap14004040004B81F0291A8" name="RxxKap14004040004B81F0291A8"></a> 
      <img src="common/15x15leer.gif" width="15" height="15" border="0" alt="top"><a href="#t2t38"><img src="common/top.gif" width="15" height="15" border="0" alt="top"></a></h3>
<p>Alle Events, die Ihnen im Beispiel hier erl&auml;utert wurden, sollen jetzt in der Praxis getestet werden. Das jeweilige Event, das eintrifft, wird auf der Konsole ausgegeben, von wo die X-Anwendung gestartet wurde.</p>
<pre><a id="Xxx999381" name="Xxx999381"></a>/* events.c */
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;X11/keysym.h&gt;
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/Xutil.h&gt;
#include "my_delay.h"
#define WINDOW_WIDTH 400
#define WINDOW_HEIGHT 300
#define MAUS_LINKS  1
#define MAUS_RECHTS 3
#define MAUS_MITTE  2
#define SCROLL_UP   4
#define SCROLL_DOWN 5
/* Funktionsprototypen */
static int create_window (void);
static void process_event (XEvent report);
static void eventloop (void);
static void close_window (void);
extern int delay (int i);
extern int time_diff (void);
/* Globale Variablen */
static unsigned int width, height;
static Display *display;
static int screen;
static int depth;
static Window win; 
/* Funktion erzeugt ein Fenster */
static int create_window (void) {
  char *window_name = "Event-Behandlung";
  char *icon_name   = "window";
  static XSizeHints size_hints;
  Window rootwin;
  width  = WINDOW_WIDTH;
  height = WINDOW_HEIGHT;
  /* X-Sitzung &ouml;ffnen */
  display = XOpenDisplay (NULL);
  /* Fehler&uuml;berpr&uuml;fung */
  if (display == NULL) {
    printf ("Verbindung zum X-Server fehlgeschlagen?!?\n");
    exit(EXIT_FAILURE);
  }
  /* Standardbildschirm eines Displays */
  screen = XDefaultScreen (display);
  /* Standardtiefe des Screens - Anzahl der Ebenen */
  depth = XDefaultDepth (display, screen);
  rootwin = RootWindow (display, screen);
  win = XCreateSimpleWindow ( display, rootwin, 10, 10,
                              width, height, 5,
                              BlackPixel (display, screen),
                              WhitePixel (display, screen));
  size_hints.flags = PSize | PMinSize | PMaxSize;
  size_hints.min_width =  width;
  size_hints.max_width =  width;
  size_hints.min_height = height;
  size_hints.max_height = height;
  XSetStandardProperties ( display, win, window_name, icon_name,
                           None, 0, 0, &amp;size_hints );
  XSelectInput (display, win,
      ButtonPressMask | ButtonReleaseMask | KeyPressMask    |
      KeyReleaseMask  | EnterWindowMask   | LeaveWindowMask |
      ExposureMask );
  XMapWindow (display, win);
  return 1;
}
static void close_window (void) {
  XDestroyWindow (display, win);
  XCloseDisplay (display);
}
static void eventloop (void) {
  XEvent xev;
  int num_events;
  XFlush (display);
  num_events = XPending (display);
  while ((num_events != 0)) {
     num_events--;
     XNextEvent (display, &amp;xev);
     process_event (xev);
  }
}
static void process_event (XEvent report) {
  KeySym key;
  char buf[128] = { 0 };
  int bufsz = 128;
  char position[50];
  switch (report.type) {
  case KeyPress:
    key = XLookupKeysym (&amp;report.xkey, 0);
    XLookupString (&amp;report.xkey, buf, bufsz, &amp;key, NULL);
    if (strlen (buf) != 0 &amp;&amp; buf[0] != '\n' &amp;&amp; buf[0] != '\r')
      printf ("Taste'%s' (Tasturcode: %d) wurde gedr&uuml;ckt\n",
         buf, XKeysymToKeycode (display, key));
    else
      printf ("Taste '%s' (Tasturcode: %d) wurde gedr&uuml;ckt\n",
         XKeysymToString (key), XKeysymToKeycode (display, key));
    break;
  case KeyRelease:
    printf ("Taste wieder losgelassen\n");
    break;
  case ButtonPress:
    switch (report.xbutton.button) {
    case MAUS_LINKS:
      sprintf (position, "(X,Y)=(%d,%d).", report.xmotion.x,
         report.xmotion.y);
      printf ("Linke Maustaste wurde gedr&uuml;ckt an Pos.: %s\n",
         position);
      break;
    case MAUS_RECHTS:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Rechte Maustaste wurde gedr&uuml;ckt an Pos.: %s\n",
         position);
      break;
    case MAUS_MITTE:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Mittlere Maustaste gedr&uuml;ckt an Pos.: %s\n",
         position);
      break;
    case SCROLL_UP:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Mausrad nach oben gescrollt an Pos.: %s\n",
         position);
      break;
    case SCROLL_DOWN:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Mausrad nach unten gescrollt an Pos.: %s\n",
         position);
      break;
    }
    break;
  case ButtonRelease:
    switch (report.xbutton.button) {
    case MAUS_LINKS:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Linke Maustaste losgelassen an Pos.: %s\n",
         position);
      break;
    case MAUS_RECHTS:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Rechte Maustaste losgelassen an Pos.: %s\n",
         position);
      break;
    case MAUS_MITTE:
      sprintf (position, "(X,Y)=(%d,%d).",
         report.xmotion.x, report.xmotion.y);
      printf ("Mittlere Maustaste losgelassen an Pos.: %s\n",
         position);
      break;
    }
    break;
  case EnterNotify:
    XSetInputFocus (display, win, RevertToParent, CurrentTime);
    printf ("Cursor 'betritt' das Fenster\n");
    break;
  case LeaveNotify:
    XSetInputFocus (display, win, RevertToParent, CurrentTime);
    printf ("Cursor 'verl&auml;sst' das Fenster\n");
    break;
  case Expose:
    printf("ExposeEvent: Bild sollte neu gezeichnet werden\n");
    break;
  default:
    break;
  }
}
 
int main (int argc, char **argv) {
  int quit = 0;
  int pause = 0;
  int td;
  create_window ();
  gettimeofday (&amp;st, NULL);
  while (!quit) {
    /* +++ Timer Anfang +++ */
    gettimeofday (&amp;rt, NULL);
    td = time_diff ();
    pause = delay (FRAME_LEN - td + pause);
    st = rt;
    /* +++ Timer Ende */
    eventloop ();
  }
  close_window ();
  return EXIT_SUCCESS;
}</pre>
<p>Das Programm bei der Ausf&uuml;hrung:</p>
<pre>$ gcc -o events events.c -L/usr/X11R6/lib -lX11
$ ./events
---[nach Aktionen auf dem Fenster die Ausgabe der Konsole]---
Mausrad nach oben gescrollt an Pos.: (X,Y)=(182,169).
Mausrad nach unten gescrollt an Pos.: (X,Y)=(182,169). 
Cursor 'verl&auml;sst' das Fenster
Cursor 'betritt' das Fenster
Cursor 'verl&auml;sst' das Fenster
ExposeEvent: Bild sollte neu gezeichnet werden
Cursor 'betritt' das Fenster
Rechte Maustaste wurde gedr&uuml;ckt an Pos.: (X,Y)=(368,276). 
Linke Maustaste wurde gedr&uuml;ckt an Pos.: (X,Y)=(368,276).
Linke Maustaste losgelassen an Pos.: (X,Y)=(368,276).
Mausrad nach unten gescrollt an Pos.: (X,Y)=(368,276). 
Cursor 'verl&auml;sst' das Fenster 
Taste'e' (Tasturcode: 26) wurde gedr&uuml;ckt
Taste wieder losgelassen
Taste 'F2' (Tasturcode: 68) wurde gedr&uuml;ckt
Taste wieder losgelassen
Taste 'F4' (Tasturcode: 70) wurde gedr&uuml;ckt
Taste wieder losgelassen
Taste 'Home' (Tasturcode: 97) wurde gedr&uuml;ckt
...</pre>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="100%" class="start" colspan="1" height="22" align="center">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20%"><a class="navnav" href="Kap14-003.html"> &lt;&lt; zur&uuml;ck</a></td>
<td width="59%">
<div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
</td>
<td align="right" width="20%">
<div align="right"><a class="navnav" href="Kap14-005.html">vor &gt;&gt; </a></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</td>
<td width="10" valign="top">&nbsp;&nbsp;</td>
<td width="160" valign="top">
    <table border="0" cellpadding="0" cellspacing="0" width="160">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">
                            &nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs">
                            <strong>Zum Katalog</strong></a>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2">
                            <img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><a href="https://www.rheinwerk-verlag.de/linux-unix-programmierung_1137/?GPP=oplup">
                                        <img src="common/749.gif"  border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-UNIX-Programmierung" title="Zum Katalog: Linux-UNIX-Programmierung">
                                        <br /><strong>Linux-UNIX-<br />Programmierung</strong><br /><img src="common/pfeil_rechts5.gif" border="0" alt="">bestellen</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Ihre Meinung?</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br /><a href="https://www.rheinwerk-verlag.de/feedback/"><img src="common/pfeil_rechts5.gif" border="0" alt="">Ihre Meinung</a>
                                    <br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2">&nbsp;<a href="https://www.rheinwerk-verlag.de/?GPP=oplup" class="navs"><strong>Buchtipps</strong></a></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-server_3685/?GPP=oplup">
                        <img src="common/3020.gif" width="78" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Server" title="Zum Katalog: Linux-Server"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-Server</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/das-komplettpaket-lpic-1-lpic-2_3782/?GPP=oplup">
                        <img src="common/3529.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2" title="Zum Katalog: Das Komplettpaket LPIC-1 &amp; LPIC-2"><br /><br /><br /><br /><br /><br /><br />&nbsp;Das Komplettpaket<br />&nbsp;LPIC-1 &amp; LPIC-2</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux-hochverfugbarkeit_3420/?GPP=oplup">
                        <img src="common/2542.gif" width="70" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux-Hochverfügbarkeit" title="Zum Katalog: Linux-Hochverfügbarkeit"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux-<br />&nbsp;Hochverfügbarkeit</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/shell-programmierung_3345/?GPP=oplup">
                        <img src="common/2310.gif" width="69" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Shell-Programmierung" title="Zum Katalog: Shell-Programmierung"><br /><br /><br /><br /><br /><br /><br />&nbsp;Shell-<br />&nbsp;Programmierung</a><br /><br /></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td><td valign="top">
                        <a href="https://www.rheinwerk-verlag.de/linux_3436/?GPP=oplup">
                        <img src="common/2591.gif" width="79" height="100" border="0" align="left" hspace="4" vspace="8" alt="Zum Katalog: Linux Handbuch" title="Zum Katalog: Linux Handbuch"><br /><br /><br /><br /><br /><br /><br />&nbsp;Linux Handbuch</a><br /><br /></td>
                    </tr>
                </table></td>
        </tr>
        <tr>
            <td><img src="common/leer.gif" height="2" width="1" border="0" /></td>
        </tr>
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td class="tbl2" height="20" colspan="2"><strong>&nbsp;Shopping</strong></td>
                    </tr>
                    <tr>
                        <td valign="top" class="tbl2" width="2"><img src="common/leer.gif" border="0" height="1" width="1"></td>
                        <td valign="top">
                            <table cellspacing="3">
                                <tr>
                                    <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br /><a href="https://www.rheinwerk-verlag.de/hilfe/bestellung_6?GPP=oplup"><img src="common/pfeil_rechts5.gif" border="0" alt="">Info</a><br /><br /></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</td>
</tr>
</table>
<br /><br />
<hr width="70%" align="center">
<br />
<div align="center">
    <p class="standard">
        <strong>Copyright © Rheinwerk Verlag GmbH 2006</strong>
        <br />F&uuml;r Ihren privaten Gebrauch d&uuml;rfen Sie die Online-Version nat&uuml;rlich 
        ausdrucken. Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, 
        wie die gebundene Ausgabe: Das Werk einschlie&szlig;lich aller seiner Teile ist 
        urheberrechtlich gesch&uuml;tzt. Alle Rechte vorbehalten einschlie&szlig;lich der 
        Vervielf&auml;ltigung, &Uuml;bersetzung, Mikroverfilmung sowie Einspeicherung und 
        Verarbeitung in elektronischen Systemen.
    </p>
    <br><a href="https://www.rheinwerk-verlag.de/">[Rheinwerk Computing]</a>
    <br /><br />Rheinwerk Verlag GmbH, Rheinwerkallee 4, 53227 Bonn, 
    Tel.: 0228.42150.0, Fax 0228.42150.77, 
    <a href="mailto:service@rheinwerk-verlag.de">service@rheinwerk-verlag.de</a>
</div>
<br /><br />
</body>

<!-- Mirrored from openbook.rheinwerk-verlag.de/linux_unix_programmierung/Kap14-004.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 19:58:37 GMT -->
</html>
